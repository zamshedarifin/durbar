$('#ambassadorForm').steps({
    headerTag: 'h3',
    bodyTag: 'section',
    autoFocus: true,
    titleTemplate: '<span class="number">#index#</span> <span class="title">#title#</span>',
    onStepChanging: function (event, currentIndex, newIndex) {
        if (currentIndex < newIndex) {
            // Step 1 form validation
              if (currentIndex === 0) {
                   let name = $('#name').parsley();
                   let gender = $('#gender').parsley();
                   let age = $('#age').parsley();
                   let address = $('#address').parsley();
                   let email = $('#email').parsley();
                   let mobile = $('#cell_phone').parsley();
                   let fb_link = $('#fb_profile_link').parsley();
                   let profession = $('#profession').parsley();
                   let district = $('#district').parsley();
                   let upazila = $('#upazila').parsley();

                   if (name.isValid() && gender.isValid() && age.isValid() && address.isValid() && email.isValid() && mobile.isValid() && fb_link.isValid() && profession.isValid() && district.isValid() && upazila.isValid()) {
                       return true;
                   } else {
                       name.validate();
                       gender.validate();
                       age.validate();
                       address.validate();
                       email.validate();
                       mobile.validate();
                       fb_link.validate();
                       profession.validate();
                       district.validate();
                       upazila.validate();
                   }
                   if ($('input[name="is_work"]:checked').length === 0) {
                       $('#work').css({"color": '#dc3545'})
                       return false;
                   } else {
                       $('#work').css({"color": 'unset'})
                   }
                   if ($('input[name="send_mail"]:checked').length === 0) {
                       $('#mail').css({"color": '#dc3545'})
                       return false;
                   } else {
                       $('#mail').css({"color": 'unset'})
                   }
               }
               // Always allow step back to the previous step even if the current step is not valid.
           } else {
            return true;
        }
    },

    onFinished: function (event, currentIndex) {
        if (currentIndex === 1) {
            var qs_1 = qs_2 = qs_3 = qs_6 = qs_7 = qs_8 = qs_10 = qs_11 = qs_12 = qs_13 = qs_14 = true;

            if ($('input[name="question_10"]:checked').length === 0) {
                $('.qs_10').css({"color": '#dc3545'})
            } else {
                $('.qs_10').css({"color": 'unset'})
                qs_10 = false;
            }
            if ($('input[name="question_11"]:checked').length === 0) {
                $('.qs_11').css({"color": '#dc3545'})
            } else {
                $('.qs_11').css({"color": 'unset'})
                qs_11 = false;
            }

            if ($('input[name="question_12"]:checked').length === 0) {
                $('.qs_12').css({"color": '#dc3545'})
            } else {
                $('.qs_12').css({"color": 'unset'})
                qs_12 = false;
            }

            if ($('input[name="question_13"]:checked').length === 0) {
                $('.qs_13').css({"color": '#dc3545'})
            } else {
                $('.qs_13').css({"color": 'unset'})
                qs_13 = false;
            }

            if ($('input[name="question_1"]:checked').length === 0) {
                $('.qs_1').css({"color": '#dc3545'})
            } else {
                $('.qs_1').css({"color": 'unset'})
                qs_1 = false;
            }

            if ($('input[name="question_2"]:checked').length === 0) {
                $('.qs_2').css({"color": '#dc3545'})
            } else {
                $('.qs_2').css({"color": 'unset'})
                qs_2 = false;
            }

            if ($('input[name="question_3"]:checked').length === 0) {
                $('.qs_3').css({"color": '#dc3545'})
            } else {
                $('.qs_3').css({"color": 'unset'})
                qs_3 = false;
            }

            if ($('input[name="question_6"]:checked').length === 0) {
                $('.qs_6').css({"color": '#dc3545'})
            } else {
                $('.qs_6').css({"color": 'unset'})
                qs_6 = false;
            }

            if ($('input[name="question_7"]:checked').length === 0) {
                $('.qs_7').css({"color": '#dc3545'})
            } else {
                $('.qs_7').css({"color": 'unset'})
                qs_7 = false;
            }
            if ($('input[name="question_8"]:checked').length === 0) {
                $('.qs_8').css({"color": '#dc3545'})
            } else {
                $('.qs_8').css({"color": 'unset'})
                qs_8 = false;
            }

            if ($('input[name="question_14"]:checked').length === 0) {
                $('.qs_14').css({"color": '#dc3545'})
            } else {
                $('.qs_14').css({"color": 'unset'})
                qs_14 = false;
            }

            if (qs_1 || qs_2 || qs_3 || qs_6 || qs_7 || qs_8 || qs_10 || qs_11 || qs_12 || qs_13 || qs_14) {
                alert("সবগুলো প্রশ্নের উত্তর দেওয়া বাধ্যতামূলক।")
                return false;
            } else {
                $('.loading').show();
                $.ajaxSetup({headers: {"X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content")}}),
                $.ajax({
                    url: '/ambassador',
                    type: "POST",
                    dataType: "JSON",
                    data: new FormData(document.getElementById("ambassadorForm")),
                    processData: !1,
                    contentType: !1,
                    success: function (e) {
                        $('.loading').hide();
                        if (e.errors) {
                            $('html, body').animate({
                                scrollTop: $("#am-form").offset().top
                            }, 2000);
                            $('#errors').empty();
                            $('.alert-danger').show();
                            $.each(e.message, function (index, value) {
                                $('#errors').append('<li>' + value + '</li>');
                            });
                        } else if (e.success) {
                            $('.loading').hide();
                            $('#ambassadorForm')[0].reset();
                            $('.alert-danger').hide();
                            $(".alert-success").show();
                            $('html, body').animate({
                                scrollTop: $("#am-form").offset().top
                            }, 2000);
                            setTimeout(function() {
                                location.reload();
                            }, 4000);
                        }
                    },
                    error: function (e, t, a) {
                        $('.loading').hide();
                        alert("Sorry, the request can not be processed at this moment. Please try again later");
                        location.reload();
                    }
                })
            }
        }

    }
});


/*
if (currentIndex === 1) {

    /!* var question_1 = document.ambassadorForm.question_1.value;
     var question_2 = document.ambassadorForm.question_2.value;
     var question_3 = document.ambassadorForm.question_3.value;
     var question_6 = document.ambassadorForm.question_6.value;
     var question_7 = document.ambassadorForm.question_7.value;
     var question_8 = document.ambassadorForm.question_8.value;
     var question_10 = document.ambassadorForm.question_10.value;
     var question_11 = document.ambassadorForm.question_11.value;
     var question_12 = document.ambassadorForm.question_12.value;
     var question_13 = document.ambassadorForm.question_13.value;
     var question_14 = document.ambassadorForm.question_14.value;
         *!/
    var qs_1 = qs_2 = qs_3 = qs_6 = qs_7 = qs_8 = qs_10 = qs_11 = qs_12 = qs_13 = qs_14 = true;
// Validate question 10
    if ($('input[name="question_10"]:checked').length === 0) {
        $('#qs_10').css({"color": '#dc3545'})
    } else {
        $('#qs_10').css({"color": 'unset'})
        qs_10 = false;
    }

    // $('#field_13').val($('#victim_file').val().split('\\').pop());
    if (qs_1 || qs_2 || qs_3 || qs_6 || qs_7 || qs_8 || qs_10 || qs_11 || qs_12 || qs_13 || qs_14) {
        /!* $('.loading').show();
         //insert data into database

        return false;
    } else {
        alert('success');
    }
}*/
