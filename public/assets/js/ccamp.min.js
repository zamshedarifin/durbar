$('#career_camp').steps({
    headerTag: 'h3',
    bodyTag: 'section',
    autoFocus: true,
    titleTemplate: '<span class="number">#index#</span> <span class="title">#title#</span>',
    onStepChanging: function (event, currentIndex, newIndex) {
        if (currentIndex < newIndex) {
            // Step 1 form validation
            if (currentIndex === 0) {
                let name = $('#name').parsley();
                let gender = $('#gender').parsley();
                let age = $('#age').parsley();
                let address = $('#address').parsley();
                let email = $('#email').parsley();
                let mobile = $('#cell_phone').parsley();
                let fb_link = $('#fb_profile_link').parsley();
                let profession = $('#profession').parsley();
                let divison = $('#divison').parsley();


                if (name.isValid() && gender.isValid() && age.isValid() && address.isValid() && email.isValid() && mobile.isValid() && fb_link.isValid() && profession.isValid() && divison.isValid()) {
                    return true;
                } else {
                    name.validate();
                    gender.validate();
                    age.validate();
                    address.validate();
                    email.validate();
                    mobile.validate();
                    fb_link.validate();
                    profession.validate();
                    divison.validate();
                }
                if ($('input[name="join_with"]:checked').length === 0) {
                    $('#join_with').css({"color": '#dc3545'})
                    return false;
                } else {
                    $('#join_with').css({"color": 'unset'})
                }

            }
            // Always allow step back to the previous step even if the current step is not valid.
        } else {
            return true;
        }
    },

    onFinished: function (event, currentIndex) {
        if (currentIndex === 1) {
            var qs_1 = qs_2 = qs_3 = qs_4 = qs_5 = true;


            if ($('input[name="question_1"]:checked').length === 0) {
                $('.qs_1').css({"color": '#dc3545'})
            } else {
                $('.qs_1').css({"color": 'unset'})
                qs_1 = false;
            }

            if ($('input[name="question_2"]:checked').length === 0) {
                $('.qs_2').css({"color": '#dc3545'})
            } else {
                $('.qs_2').css({"color": 'unset'})
                qs_2 = false;
            }

            if ($('input[name="question_3"]:checked').length === 0) {
                $('.qs_3').css({"color": '#dc3545'})
            } else {
                $('.qs_3').css({"color": 'unset'})
                qs_3 = false;
            }

            if ($('input[name="question_4"]:checked').length === 0) {
                $('.qs_4').css({"color": '#dc3545'})
            } else {
                $('.qs_4').css({"color": 'unset'})
                qs_4 = false;
            }

            if ($('input[name="question_5"]:checked').length === 0) {
                $('.qs_5').css({"color": '#dc3545'})
            } else {
                $('.qs_5').css({"color": 'unset'})
                qs_5 = false;
            }

            if (qs_1 || qs_2 || qs_3 || qs_4 || qs_5) {
                alert("সবগুলো প্রশ্নের উত্তর দেওয়া বাধ্যতামূলক।")
                return false;
            } else {
                $('.loading').show();
                $.ajaxSetup({headers: {"X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content")}}),
                    $.ajax({
                        url: '/career_camp',
                        type: "POST",
                        dataType: "JSON",
                        data: new FormData(document.getElementById("career_camp")),
                        processData: !1,
                        contentType: !1,
                        success: function (e) {
                            $('.loading').hide();
                            if (e.errors) {
                                $('html, body').animate({
                                    scrollTop: $("#am-form").offset().top
                                }, 2000);
                                $('#errors').empty();
                                $('.alert-danger').show();
                                $.each(e.message, function (index, value) {
                                    $('#errors').append('<li>' + value + '</li>');
                                });
                            } else if (e.success) {
                                $('.loading').hide();
                                $('#career_camp')[0].reset();
                                $('.alert-danger').hide();
                                $(".alert-success").show();
                                $('html, body').animate({
                                    scrollTop: $("#am-form").offset().top
                                }, 2000);
                                setTimeout(function() {
                                    location.reload();
                                }, 10000);
                            }
                        },
                        error: function (e, t, a) {

                            $('.loading').hide();
                            alert("Sorry, the request can not be processed at this moment. Please try again later");
                            location.reload();
                        }
                    })
            }
        }

    }
});
